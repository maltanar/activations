schema: '2.0'
stages:
  setup:
    cmd: python -m export
    deps:
    - path: activations.py
      hash: md5
      md5: bcf513ff0887998f933d0bd60dc4eadd
      size: 32641
    - path: export.py
      hash: md5
      md5: 607fada95e5923a106fbd4275c4eac74
      size: 4328
    - path: utils.py
      hash: md5
      md5: f84dabfd10a04e1bb70b41d6be638042
      size: 381
    params:
      params.yaml:
        calibration_passes: 2048
        export:
          opset_version: 14
          do_constant_folding: true
        model:
          activation: sigmoid
          pattern: (0.2 * torch.relu(3.7 * x + 0.4) - 0.1) / 1.3
          input_bits: 8
          bits: 8
        range:
        - -10
        - 10
        seed: 12
        shape:
        - 64
    outs:
    - path: inp.npy
      hash: md5
      md5: 5ca29830c87ab684c213b86a745cffeb
      size: 384
    - path: model.onnx
      hash: md5
      md5: 0e2b41c8182518b3675602908b47265d
      size: 2011
    - path: out.npy
      hash: md5
      md5: daf0eb48d77b82d6747380804b99c9b4
      size: 384
  build:
    cmd: bash run.sh '$FINN/run-docker.sh build_custom $(pwd)'
    deps:
    - path: build.py
      hash: md5
      md5: b68048bdd873fb2b92a08dce8da9cfa5
      size: 5887
    - path: build_steps.py
      hash: md5
      md5: bafe63c06da25900824aef4861154162
      size: 18743
    - path: custom/apply_config.py
      hash: md5
      md5: 4c907c16f9d3e2f5377e36f153af40b8
      size: 2360
    - path: custom/composed_transformation.py
      hash: md5
      md5: b77d9e6dd01758cdacc6599b54324d50
      size: 3118
    - path: custom/streamline.py
      hash: md5
      md5: 60f6f60ed63b8e80f47a5012ab80006b
      size: 27155
    - path: inp.npy
      hash: md5
      md5: 5ca29830c87ab684c213b86a745cffeb
      size: 384
    - path: model.onnx
      hash: md5
      md5: 0e2b41c8182518b3675602908b47265d
      size: 2011
    - path: noctua.sh
      hash: md5
      md5: f3e8cc342b63cddcd2e07bfe63f6518c
      size: 1832
    - path: out.npy
      hash: md5
      md5: daf0eb48d77b82d6747380804b99c9b4
      size: 384
    - path: quant_to_multithreshold.py
      hash: md5
      md5: 490ac5d34e6884499a25c1a5517328d5
      size: 28062
    - path: run.sh
      hash: md5
      md5: 6e3e34149c16795c5a8424a51bdbf5f8
      size: 1616
    - path: utils.py
      hash: md5
      md5: f84dabfd10a04e1bb70b41d6be638042
      size: 381
    params:
      params.yaml:
        build:
          output_dir: build
          stitched_ip_gen_dcp: false
          synth_clk_period_ns: 10.0
          board: RFSoC2x2
          shell_flow_type: vivado_zynq
          folding_config_file: folding.yaml
          specialize_layers_config_file: specialize_layers.json
          standalone_thresholds: true
          max_multithreshold_bit_width: 16
          mvau_wwidth_max: 2048
          split_large_fifos: true
        seed: 12
        shape:
        - 64
      folding.yaml:
        defaults:
          Thresholding_hls:
            mem_mode: internal_decoupled
            ram_style: distributed
            runtime_writeable_weights: 0
          Thresholding_rtl:
            depth_trigger_uram: 2147483647
            depth_trigger_bram: 2147483647
            runtime_writeable_weights: 0
          StreamingFIFO_rtl:
            impl_style: rtl
            ram_style: distributed
      specialize_layers.json:
        '':
          preferred_impl_style: ''
        Defaults:
          preferred_impl_style:
          - rtl
          - - Thresholding
    outs:
    - path: build/
      hash: md5
      md5: 699b12121b07920525b9962a1994524b.dir
      size: 75267114
      nfiles: 137
  verify:
    cmd: python -m verify
    deps:
    - path: build/verification_output/
      hash: md5
      md5: 177bd7fa22072fda8dc46c662a608be8.dir
      size: 1360240
      nfiles: 8
    - path: verify.py
      hash: md5
      md5: 2cbebda1e941ed0be91b40ea513c8b8d
      size: 971
    params:
      params.yaml:
        build.output_dir: build
    outs:
    - path: verification.yaml
      hash: md5
      md5: 5224a3f087dfdd2bec5b236e4205ac3c
      size: 22
  metrics:
    cmd: python -m metrics
    deps:
    - path: build/
      hash: md5
      md5: 699b12121b07920525b9962a1994524b.dir
      size: 75267114
      nfiles: 137
    - path: build/report/post_synth_resources.json
      hash: md5
      md5: 589c7d6a7149bae1c5af8a101ca351e0
      size: 981
    - path: metrics.py
      hash: md5
      md5: 027dcb70a77c34f84948bc3d5ee2107f
      size: 932
    params:
      params.yaml:
        build.output_dir: build
        metrics:
          report: build/report/post_synth_resources.json
          filter: (top)
    outs:
    - path: metrics.yaml
      hash: md5
      md5: 9980f60e12da474c1faae66061f91ba9
      size: 68
